# 博客卡片展示功能实现说明

## 功能概述

本功能实现了在广场/朋友圈中展示博客类型动态的特殊卡片样式，与普通动态卡片做出明显区分，提供更好的用户体验。

## 实现的功能

### 一、展示结构

#### 博客卡片内容：
- **博客标签**：右上角显示"📓 博客"标签，视觉上区分动态类型
- **封面图**：居中显示，标准比例16:9，支持悬停放大效果
- **默认封面**：如无上传封面图，显示浅灰底+"Blog"字样的默认封面
- **博客标题**：加粗显示，1-2行，多余自动省略
- **博客摘要**：若有，限1-2行，多余显示...
- **阅读全文按钮**：渐变背景，悬停效果

#### 与普通动态卡片区分：
- 博客卡片整体更简洁，风格偏向 Medium / CSDN 专栏风格
- 博客卡片边框和背景色有变化，强调内容"重量级"
- 普通动态卡片保持"上图下文"结构，多图九宫格、简短内容

### 二、点击逻辑

- 点击博客卡片任意位置或"阅读全文"按钮，进入博客详情页
- 博客详情页以"博客编辑器预览区"的样式完整呈现博客内容
- 支持图文混排、表格、引用、代码块等 CKEditor 富文本内容

### 三、展示细节

- 博客卡片上角加"📓 博客"小标签，视觉上即区分动态
- 保留"点赞 / 评论 / 收藏"区域，与普通动态一致（暂时显示为0）
- 响应式设计，支持移动端显示

## 技术实现

### 1. 数据模型修改

**文件：`blog/models.py`**
- 为 `BlogPost` 模型添加 `like_count()` 和 `comment_count()` 方法
- 支持在动态列表中统一显示

### 2. 视图层修改

**文件：`moments/views.py` 和 `plaza/views.py`**
- 修改 `moments_list` 和 `plaza_list` 视图
- 获取博客数据并与普通动态合并
- 按时间排序显示
- 为每个项目添加 `content_type` 标识

### 3. 模板层修改

**文件：**
- `moments/templates/moments/moments.html`
- `plaza/templates/plaza/plaza.html`
- `blog/templates/blog/blog_detail.html`

**功能：**
- 根据 `content_type` 区分显示博客卡片或普通动态卡片
- 博客卡片包含封面图、标题、摘要、阅读全文按钮
- 博客详情页支持 CKEditor 富文本内容显示

### 4. 样式设计

**文件：**
- `moments/static/moments/css/moments.css`
- `plaza/static/plaza/css/plaza.css`

**样式特点：**
- 博客卡片使用渐变背景和阴影效果
- 封面图支持悬停放大动画
- 响应式设计，适配不同屏幕尺寸
- 现代化的卡片设计风格

## 使用方法

### 1. 创建博客

用户可以通过博客创建页面创建博客，并选择发布到：
- `private`：仅自己可见
- `moments`：发布到朋友圈
- `plaza`：发布到广场

### 2. 查看博客

- 在朋友圈/广场页面可以看到博客卡片
- 点击博客卡片或"阅读全文"按钮进入博客详情页
- 博客详情页完整显示富文本内容

### 3. 编辑博客

博客作者可以在博客详情页点击"编辑博客"按钮进行编辑。

## 测试数据

系统已创建测试博客：
- 朋友圈测试博客（ID: 14）
- 广场测试博客

可以通过访问朋友圈和广场页面查看博客卡片的显示效果。

## 未来扩展

1. **点赞功能**：为博客添加点赞功能
2. **评论功能**：为博客添加评论功能
3. **收藏功能**：为博客添加收藏功能
4. **标签系统**：完善博客标签的显示和筛选
5. **分类系统**：按博客分类进行筛选显示

## 注意事项

1. 博客卡片暂时不支持点赞和评论功能，显示为0
2. 博客详情页使用 `|safe` 过滤器显示富文本内容，确保安全性
3. 响应式设计确保在不同设备上的良好显示效果
4. 所有样式都遵循项目的设计规范 