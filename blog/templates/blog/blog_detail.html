{% extends "base.html" %}
{% load static %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<div class="container mt-5" style="max-width: 800px;">
    <h1 class="mb-2">{{ post.title }}</h1>
    <p class="text-muted">作者：{{ post.author.username }} ｜ {{ post.created_at|date:"Y-m-d H:i" }}</p>

    {% if post.cover_image %}
    <img src="{{ post.cover_image.url }}" alt="封面图" class="img-fluid rounded mb-4">
    {% endif %}

    {% if post.images.all %}
    <div class="row mb-4" style="gap:10px;flex-wrap:wrap;">
        {% for img in post.images.all %}
        <div style="width:120px;height:120px;overflow:hidden;border-radius:8px;display:inline-block;">
            <img src="{{ img.image.url }}" alt="配图" style="width:100%;height:100%;object-fit:cover;border-radius:8px;">
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="mb-5" style="white-space: pre-wrap;">
        {{ post.content }}
    </div>

    {% if post.author == request.user %}
    <a href="{% url 'blog_edit' post.pk %}" class="btn btn-outline-primary">编辑博客</a>
    {% endif %}
</div>
{% endblock %}